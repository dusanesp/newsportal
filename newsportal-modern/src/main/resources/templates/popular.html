<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/layout :: head(title='Popular Articles')"></head>

<body class="bg-gray-100 font-sans leading-normal tracking-normal flex flex-col min-h-screen">
    <nav th:replace="fragments/layout :: header"></nav>

    <div class="container mx-auto flex flex-wrap py-6 grow">
        <!-- Main Content -->
        <div class="w-full md:w-3/4 p-6 flex flex-col">
            <h1 class="text-3xl font-bold mb-6 text-gray-800">
                <i class="fas fa-fire text-orange-600 mr-2"></i>Most Popular Articles
            </h1>

            <div class="bg-white shadow-md rounded-lg p-6">
                <ol class="space-y-4">
                    <li th:each="article, iterStat : ${articles}" class="border-b border-gray-100 pb-4 last:border-0">
                        <div class="flex items-start space-x-3">
                            <span class="text-2xl font-bold text-blue-600" th:text="${iterStat.count}">1</span>
                            <div class="flex-1">
                                <h2 class="text-xl font-semibold mb-2">
                                    <a th:href="@{/article/{id}(id=${article.id})}"
                                        class="text-gray-800 hover:text-blue-600 transition"
                                        th:text="${article.title}">Article Title</a>
                                </h2>
                                <p class="text-gray-700 mb-3 line-clamp-2" th:utext="${article.preview}">Preview text...
                                </p>
                                <div class="flex items-center space-x-4 text-sm text-gray-600">
                                    <span class="flex items-center">
                                        <i class="fas fa-calendar mr-1"></i>
                                        <span th:text="${#dates.format(article.created, 'dd MMM yyyy')}">Date</span>
                                    </span>
                                    <span class="flex items-center">
                                        <i class="fas fa-user mr-1"></i>
                                        <span th:text="${article.author.login}">Author</span>
                                    </span>
                                    <span class="flex items-center">
                                        <i class="fas fa-eye mr-1"></i>
                                        <span th:text="${article.viewCount}">0</span> views
                                    </span>
                                    <a th:if="${article.category != null}"
                                        th:href="@{/category/{name}(name=${article.category.name})}"
                                        th:text="${article.category.name}"
                                        class="text-xs font-bold text-white bg-blue-600 px-2 py-1 rounded-full uppercase hover:bg-blue-700 transition">Category</a>
                                </div>
                            </div>
                        </div>
                    </li>
                </ol>

                <div th:if="${#lists.isEmpty(articles)}" class="text-gray-500 text-center py-8">
                    <i class="fas fa-inbox text-4xl mb-2"></i>
                    <p>No popular articles found.</p>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div th:replace="fragments/layout :: sidebar"></div>
    </div>

    <footer th:replace="fragments/layout :: footer"></footer>
</body>

</html>