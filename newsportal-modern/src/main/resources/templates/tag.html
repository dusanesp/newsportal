<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments/layout :: head(title='Tag Articles - Newsportal')"></head>

<body class="bg-gray-100 font-sans leading-normal tracking-normal">
    <nav th:replace="fragments/layout :: header"></nav>

    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-wrap -mx-2">
            <!-- Main Content -->
            <div class="w-full md:w-3/4 px-2">
                <div class="bg-white shadow-md rounded-lg p-6">
                    <h2 class="text-3xl font-bold mb-4 text-gray-800">Articles Tagged:</h2>
                    <div class="mb-6">
                        <span class="px-4 py-2 bg-blue-600 text-white text-lg rounded-full" th:text="${tagName}">Tag
                            Name</span>
                    </div>

                    <!-- Articles List -->
                    <div th:if="${articles.hasContent()}" class="space-y-6">
                        <article th:each="article : ${articles.content}"
                            class="border-b border-gray-200 pb-6 last:border-0">
                            <h3 class="text-2xl font-semibold mb-2">
                                <a th:href="@{/article/{id}(id=${article.id})}" th:text="${article.title}"
                                    class="text-blue-600 hover:text-blue-800 transition">Article Title</a>
                            </h3>
                            <div class="flex items-center text-sm text-gray-500 mb-3 space-x-4">
                                <span>
                                    <i class="fas fa-user"></i>
                                    <span th:text="${article.author.login}">Author</span>
                                </span>
                                <span>
                                    <i class="fas fa-calendar"></i>
                                    <span th:text="${#dates.format(article.created, 'MMM dd, yyyy')}">Date</span>
                                </span>
                                <span>
                                    <i class="fas fa-eye"></i>
                                    <span th:text="${article.viewCount}">0</span> views
                                </span>
                            </div>
                            <p class="text-gray-700 mb-3" th:utext="${#strings.abbreviate(article.content, 200)}">
                                Article preview text goes here...
                            </p>
                            <div class="flex items-center space-x-2">
                                <span class="px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"
                                    th:text="${article.category.name}">Category</span>
                            </div>
                        </article>
                    </div>

                    <!-- No Results -->
                    <div th:unless="${articles.hasContent()}" class="text-center py-12">
                        <i class="fas fa-tag text-6xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-600 mb-2">No articles found</h3>
                        <p class="text-gray-500">No articles with this tag yet</p>
                    </div>

                    <!-- Pagination -->
                    <div th:if="${articles.totalPages > 1}" class="mt-8 flex justify-center">
                        <nav class="flex space-x-2">
                            <a th:if="${articles.hasPrevious()}"
                                th:href="@{/tag/{tagName}(tagName=${tagName}, page=${articles.number - 1})}"
                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition">
                                Previous
                            </a>
                            <span class="px-4 py-2 bg-blue-600 text-white rounded">
                                Page <span th:text="${articles.number + 1}">1</span> of <span
                                    th:text="${articles.totalPages}">1</span>
                            </span>
                            <a th:if="${articles.hasNext()}"
                                th:href="@{/tag/{tagName}(tagName=${tagName}, page=${articles.number + 1})}"
                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition">
                                Next
                            </a>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div th:replace="fragments/layout :: sidebar"></div>
        </div>
    </div>

    <footer th:replace="fragments/layout :: footer"></footer>
</body>

</html>