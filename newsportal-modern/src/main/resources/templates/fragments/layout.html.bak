\u003c!DOCTYPE html\u003e
\u003chtml xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"\u003e

\u003chead th:fragment="head(title)"\u003e
\u003cmeta charset="UTF-8"\u003e
\u003cmeta name="viewport" content="width=device-width, initial-scale=1.0"\u003e
\u003ctitle th:text="${title}"\u003eNewsportal\u003c/title\u003e
\u003cscript src="https://cdn.tailwindcss.com"\u003e\u003c/script\u003e
\u003clink rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"\u003e
\u003c/head\u003e

\u003cbody class="bg-gray-100 font-sans leading-normal tracking-normal"\u003e
\u003cnav th:fragment="header" class="bg-gray-800 p-4 mt-0 w-full z-10 top-0"\u003e
\u003cdiv class="container mx-auto flex flex-wrap items-center justify-between"\u003e
\u003c!-- Logo --\u003e
\u003cdiv class="flex items-center text-white font-extrabold"\u003e
\u003ca class="text-white no-underline hover:text-white hover:no-underline" href="/"\u003e
\u003cspan class="text-2xl pl-2"\u003eNewsportal\u003c/span\u003e
\u003c/a\u003e
\u003c/div\u003e

\u003c!-- Main Navigation + Search + User Menu --\u003e
\u003cdiv class="flex items-center space-x-6"\u003e
\u003c!-- Main Navigation Links --\u003e
\u003cul class="flex items-center space-x-4"\u003e
\u003cli\u003e
\u003ca class="text-gray-300 hover:text-white transition" href="/"\u003eHome\u003c/a\u003e
\u003c/li\u003e
\u003cli\u003e
\u003ca class="text-gray-300 hover:text-white transition" href="/about"\u003eAbout\u003c/a\u003e
\u003c/li\u003e
\u003cli\u003e
\u003ca class="text-gray-300 hover:text-white transition" href="/article/popular"\u003ePopular\u003c/a\u003e
\u003c/li\u003e
\u003cli sec:authorize="hasAnyRole('ADMIN', 'AUTHOR')"\u003e
\u003ca class="text-gray-300 hover:text-white transition" href="/article/add"\u003eCreate Article\u003c/a\u003e
\u003c/li\u003e
\u003c/ul\u003e

\u003c!-- Search Form --\u003e
\u003cform th:action="@{/search}" method="post" class="flex items-center"\u003e
\u003cinput type="text" name="query" required placeholder="Search articles..."
class="px-3 py-1 rounded-l bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2
focus:ring-blue-500 text-sm w-48"\u003e
\u003cbutton type="submit"
class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-r transition text-sm"\u003e
Search
\u003c/button\u003e
\u003c/form\u003e

\u003c!-- User Menu --\u003e
\u003cdiv class="flex items-center space-x-2"\u003e
\u003c!-- Not Authenticated --\u003e
\u003cdiv sec:authorize="!isAuthenticated()"\u003e
\u003ca class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition text-sm"
href="/login"\u003eLogin\u003c/a\u003e
\u003c/div\u003e

\u003c!-- Authenticated Users --\u003e
\u003cdiv sec:authorize="isAuthenticated()" class="relative group"\u003e
\u003cbutton class="flex items-center text-gray-300 hover:text-white space-x-1 focus:outline-none"\u003e
\u003ci class="fas fa-user-circle text-xl"\u003e\u003c/i\u003e
\u003cspan sec:authentication="name"\u003eUser\u003c/span\u003e
\u003ci class="fas fa-chevron-down text-xs"\u003e\u003c/i\u003e
\u003c/button\u003e

\u003c!-- Dropdown Menu --\u003e
\u003cdiv
class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-50"\u003e
\u003ca href="/profile" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 transition"\u003e
\u003ci class="fas fa-user mr-2"\u003e\u003c/i\u003eProfile
\u003c/a\u003e
\u003cform th:action="@{/logout}" method="post" class="block"\u003e
\u003cbutton type="submit"
class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100 transition"\u003e
\u003ci class="fas fa-sign-out-alt mr-2"\u003e\u003c/i\u003eLogout
\u003c/button\u003e
\u003c/form\u003e
\u003c/div\u003e
\u003c/div\u003e
\u003c/div\u003e
\u003c/div\u003e
\u003c/div\u003e
\u003c/nav\u003e

\u003c!-- Sidebar Fragment --\u003e
\u003cdiv th:fragment="sidebar" class="w-full md:w-1/4 p-6 flex flex-col space-y-6"\u003e
\u003c!-- Categories Section --\u003e
\u003cdiv class="bg-white shadow-md rounded-lg p-6"\u003e
\u003ch3 class="text-xl font-semibold mb-4 border-b pb-2 text-gray-800"\u003e
\u003ci class="fas fa-folder mr-2 text-blue-600"\u003e\u003c/i\u003eCategories
\u003c/h3\u003e
\u003cul class="space-y-2"\u003e
\u003cli th:each="category : ${categories}"\u003e
\u003ca th:href="@{/category/{name}(name=${category.name})}" th:text="${category.name}"
class="text-blue-600 hover:text-blue-800 hover:underline transition flex items-center justify-between"\u003e
\u003cspan\u003eCategory Name\u003c/span\u003e
\u003cspan th:if="${category.articleCount != null}"
class="text-xs bg-gray-200 px-2 py-1 rounded-full"
th:text="${category.articleCount}"\u003e0\u003c/span\u003e
\u003c/a\u003e
\u003c/li\u003e
\u003c/ul\u003e
\u003c/div\u003e

\u003c!-- Tags Section --\u003e
\u003cdiv class="bg-white shadow-md rounded-lg p-6"\u003e
\u003ch3 class="text-xl font-semibold mb-4 border-b pb-2 text-gray-800"\u003e
\u003ci class="fas fa-tags mr-2 text-blue-600"\u003e\u003c/i\u003eTags
\u003c/h3\u003e
\u003cdiv class="flex flex-wrap gap-2"\u003e
\u003ca th:each="tag : ${tags}" th:href="@{/tag/{name}(name=${tag})}" th:text="${tag}"
class="px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full hover:bg-blue-200 transition"\u003eTag\u003c/a\u003e
\u003c/div\u003e
\u003c/div\u003e

\u003c!-- Top Viewed Articles Section (if available) --\u003e
\u003cdiv th:if="${topViewedArticles != null and !topViewedArticles.isEmpty()}"
class="bg-white shadow-md rounded-lg p-6"\u003e
\u003ch3 class="text-xl font-semibold mb-4 border-b pb-2 text-gray-800"\u003e
\u003ci class="fas fa-fire mr-2 text-orange-600"\u003e\u003c/i\u003eTop Viewed
\u003c/h3\u003e
\u003cul class="space-y-3"\u003e
\u003cli th:each="article, iterStat : ${topViewedArticles}"\u003e
\u003ca th:href="@{/article/{id}(id=${article.id})}"
class="block hover:bg-gray-50 rounded p-2 transition"\u003e
\u003cdiv class="flex items-start space-x-2"\u003e
\u003cspan class="text-blue-600 font-bold text-lg" th:text="${iterStat.count}"\u003e1\u003c/span\u003e
\u003cdiv class="flex-1"\u003e
\u003cp class="text-sm font-semibold text-gray-800 line-clamp-2 hover:text-blue-600"
th:text="${article.title}"\u003eArticle Title\u003c/p\u003e
\u003cp class="text-xs text-gray-500 flex items-center mt-1"\u003e
\u003ci class="fas fa-eye mr-1"\u003e\u003c/i\u003e
\u003cspan th:text="${article.viewCount}"\u003e0\u003c/span\u003e views
\u003c/p\u003e
\u003c/div\u003e
\u003c/div\u003e
\u003c/a\u003e
\u003c/li\u003e
\u003c/ul\u003e
\u003c/div\u003e
\u003c/div\u003e

\u003cfooter th:fragment="footer" class="bg-gray-800 text-white p-4 mt-8 text-center"\u003e
\u003cp\u003e&copy; 2025 Newsportal. All rights reserved.\u003c/p\u003e
\u003c/footer\u003e
\u003c/body\u003e

\u003c/html\u003e