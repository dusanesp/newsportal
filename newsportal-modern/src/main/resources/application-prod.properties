# Production Application Properties
spring.application.name=newsportal-modern

# ============================================
# Database Configuration (USE ENVIRONMENT VARIABLES!)
# ============================================
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/newsportalmodern?createDatabaseIfNotExist=true&serverTimezone=UTC&useSSL=true&requireSSL=false}
spring.datasource.username=${DB_USERNAME:newsportal_user}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# ============================================
# JPA / Hibernate - PRODUCTION SETTINGS
# ============================================
# IMPORTANT: Set to 'validate' in production to prevent schema changes
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:validate}
spring.jpa.show-sql=false
spring.jpa.open-in-view=false
spring.jpa.defer-datasource-initialization=false

# Hibernate Performance
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ============================================
# Thymeleaf - PRODUCTION SETTINGS
# ============================================
spring.thymeleaf.cache=true

# ============================================
# File Upload Configuration
# ============================================
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.enabled=true

# ============================================
# Server Configuration
# ============================================
server.port=${SERVER_PORT:8080}
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-exception=false

# Session Configuration
server.servlet.session.timeout=${SESSION_TIMEOUT:30m}
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=${COOKIE_SECURE:true}
server.servlet.session.cookie.same-site=strict

# ============================================
# HTTPS/SSL Configuration (Enable in production)
# ============================================
# server.ssl.enabled=${SSL_ENABLED:true}
# server.ssl.key-store=${SSL_KEYSTORE:classpath:keystore.p12}
# server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
# server.ssl.key-store-type=PKCS12
# server.ssl.key-alias=newsportal

# ============================================
# Actuator Configuration (Health Check Only)
# ============================================
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=never
management.health.defaults.enabled=true

# ============================================
# Logging Configuration
# ============================================
logging.level.root=WARN
logging.level.net.filippov.newsportal=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN

# Log file
logging.file.name=${LOG_FILE:/var/log/newsportal/application.log}
logging.file.max-size=10MB
logging.file.max-history=30

# Security logging
logging.level.org.springframework.security.web.authentication=INFO
